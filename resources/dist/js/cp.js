(()=>{"use strict";var e,t={215:(e,t,n)=>{function s(){}function i(e,t){s.call(this);var n=this;n.container=e,n.labels=t.labels,n.lines=t.lines,n.tooltip=null,n.svgElement=n.createSvgElement("svg",{style:"font-family: Arial, sans-serif;"}),n.container.appendChild(n.svgElement),window.addEventListener("resize",(function(){n.render()})),n.svgElement.addEventListener("mouseleave",(function(){n.removeTooltip()})),n.svgElement.addEventListener("mousemove",(function(e){var t=n.svgElement.getBoundingClientRect(),s=t.top+document.body.scrollTop,i=t.left+document.body.scrollLeft,a=e.pageX-i,r=e.pageY-s,o=Math.max(0,Math.min(n.labels.length-1,Math.round((a-n.padding.left-20)/n.axis.x.stepSize)));if(null===n.tooltip||n.tooltip.datumIndex!==o){n.removeTooltip(),n.tooltip={datumIndex:o,element:n.createSvgElement("g",{"pointer-events":"none"}),line:n.createSvgElement("line",{x1:n.padding.left+20+o*n.axis.x.stepSize,y1:n.padding.top,x2:n.padding.left+20+o*n.axis.x.stepSize,y2:n.height-n.padding.bottom,stroke:"#c0c0c0"})},n.svgElement.insertBefore(n.tooltip.line,n.svgElement.firstChild),n.svgElement.appendChild(n.tooltip.element),(d=n.createSvgElement("text",{x:10,y:21,"font-size":12})).textContent=n.labels[o],n.tooltip.element.appendChild(d);for(var l=0;l<n.lines.length;l++){var d=n.createSvgElement("text",{x:10,y:21+16*(l+1),"font-size":12});n.tooltip.element.appendChild(d);var c=n.createSvgElement("tspan",{fill:n.colors[l%n.colors.length]});d.appendChild(c),c.textContent=n.lines[l].title+": ";var u=n.createSvgElement("tspan",{"font-weight":"bold"});d.appendChild(u),u.textContent=n.formatNumber(n.lines[l].data[o])}var h=n.tooltip.element.getBBox(),f=n.createSvgElement("rect",{x:0,y:0,width:h.width+20,height:h.height+20,rx:3,ry:3,fill:"rgba(255, 255, 255, .9)",stroke:"#c0c0c0"});n.tooltip.element.insertBefore(f,n.tooltip.element.firstChild);var p=n.padding.left+20+o*n.axis.x.stepSize-h.width-30,m=r-(h.height+20)/2;p<0&&(p+=h.width+40),m=Math.max(n.padding.top,Math.min(300-n.padding.bottom-h.height-20,m)),n.tooltip.element.setAttribute("transform","translate("+p+", "+m+")")}})),n.render()}s.prototype={colors:["#d2007a","#0098d4","#dddb2f","#1d7e07","#2c4a4a","#ff5928"],createSvgElement:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var s in t)n.setAttribute(s,t[s]);return n},formatNumber:function(e){var t="";for(e+="";e.length>3;)t="."+e.substr(e.length-3)+t,e=e.substr(0,e.length-3);return t=e+t}},i.prototype=Object.create(s.prototype,{constructor:{value:i},render:{value:function(){var e=this;for(e.width=e.container.clientWidth,e.height=300,e.svgElement.setAttribute("width",e.width),e.svgElement.setAttribute("height",e.height),e.svgElement.setAttribute("viewBox","0 0 "+e.width+" "+e.height);e.svgElement.childNodes.length;)e.svgElement.removeChild(e.svgElement.firstChild);e.renderLegend(),e.renderAxis(),e.renderLines()}},renderLegend:{value:function(){var e=this;e.legend=e.createSvgElement("g"),e.svgElement.appendChild(e.legend);for(var t=0,n=0;n<e.lines.length;n++){var s=e.createSvgElement("g",{transform:"translate("+t+", 0)"});e.legend.appendChild(s);var i=e.createSvgElement("circle",{cx:10,cy:8,r:3.5,fill:e.lines[n].color,stroke:"none"});s.appendChild(i);var a=e.createSvgElement("text",{x:20,y:13,"font-size":14});s.appendChild(a),a.textContent=e.lines[n].title,t+=s.getBBox().width+20}}},renderAxis:{value:function(){var e=this;e.axis={x:{nthLabel:1},y:{maximum:1,step:1}};for(var t=0;t<e.lines.length;t++)for(var n=0;n<e.lines[t].data.length;n++)e.axis.y.maximum=Math.max(e.axis.y.maximum,e.lines[t].data[n]);for(;7*e.axis.y.step<e.axis.y.maximum;)e.axis.y.step*=10;e.axis.y.step%2==0&&3.5*e.axis.y.step>e.axis.y.maximum&&(e.axis.y.step/=2),e.axis.y.maximum=Math.ceil(e.axis.y.maximum/e.axis.y.step)*e.axis.y.step,e.axis.x.element=e.createSvgElement("g"),e.svgElement.appendChild(e.axis.x.element),e.axis.y.element=e.createSvgElement("g"),e.svgElement.appendChild(e.axis.y.element);for(var s=0;s<e.labels.length;s++)e.axis.x.element.appendChild(e.renderXAxisLabel(e.labels[s]));for(var i=0;i<=e.axis.y.maximum;i+=e.axis.y.step)e.axis.y.element.appendChild(e.renderYAxisLabel(e.formatNumber(i)));e.padding={top:e.legend.getBBox().height+20,left:-1*Math.min(e.axis.x.element.getBBox().x+20,e.axis.y.element.getBBox().x-8),bottom:e.axis.x.element.getBBox().height},e.axis.x.element.setAttribute("transform","translate(0, "+(e.height-e.padding.bottom)+")"),e.axis.x.stepSize=e.labels.length>1?(e.width-e.padding.left-40)/(e.labels.length-1):20;for(var a=0;e.axis.x.stepSize*e.axis.x.nthLabel<20&&(e.axis.x.nthLabel++,!(a>40));)a++;if(e.axis.x.nthLabel>1)for(s=e.axis.x.element.childNodes.length-1;s>0;s--)s%e.axis.x.nthLabel&&e.axis.x.element.removeChild(e.axis.x.element.childNodes[s]);for(s=0;s<e.axis.x.element.childNodes.length;s++)e.axis.x.element.childNodes[s].setAttribute("transform","translate("+(e.padding.left+20+e.axis.x.nthLabel*s*e.axis.x.stepSize)+", 0)");e.axis.y.element.setAttribute("transform","translate("+e.padding.left+", 0)"),e.axis.y.stepSize=(300-e.padding.bottom-e.padding.top)/(e.axis.y.maximum/e.axis.y.step);for(s=0;s<e.axis.y.element.childNodes.length;s++)e.axis.y.element.childNodes[s].setAttribute("transform","translate(0, "+(300-e.padding.bottom-s*e.axis.y.stepSize)+")")}},renderXAxisLabel:{value:function(e){var t=this,n=t.createSvgElement("g"),s=t.createSvgElement("line",{x1:0,y1:0,x2:0,y2:5,stroke:"#c0c0c0"});n.appendChild(s);var i=t.createSvgElement("text",{x:-15,y:7,"font-size":11,"text-anchor":"end",transform:"rotate(-45 0 0)"});return i.textContent=e,n.appendChild(i),n}},renderYAxisLabel:{value:function(e){var t=this,n=t.createSvgElement("g"),s=t.createSvgElement("line",{x1:0,y1:0,x2:t.width,y2:0,stroke:"#c0c0c0"});n.appendChild(s);var i=t.createSvgElement("text",{x:-8,y:4,"font-size":11,"text-anchor":"end"});return i.textContent=e,n.appendChild(i),n}},renderLines:{value:function(){for(var e=this,t=0;t<e.lines.length;t++){e.lines[t].element=e.createSvgElement("g",{transform:"translate("+(e.padding.left+20)+", "+(300-e.padding.bottom)+")"}),e.svgElement.appendChild(e.lines[t].element);var n=[];e.lines[t].circles=[];for(var s=0;s<e.lines[t].data.length;s++){var i={x:s*e.axis.x.stepSize,y:-1*e.lines[t].data[s]*(e.axis.y.stepSize/e.axis.y.step)};if(n.push(i.x+","+i.y),e.axis.x.stepSize>=10){var a=e.createSvgElement("circle",{cx:i.x,cy:i.y,r:3.5,fill:e.lines[t].color,stroke:"none",cursor:"pointer"});e.lines[t].element.appendChild(a),e.lines[t].circles.push(a),a.addEventListener("mouseenter",(function(e){e.target.setAttribute("r",4.5)})),a.addEventListener("mouseleave",(function(e){e.target.setAttribute("r",3.5)}))}}var r=e.createSvgElement("polyline",{points:n.join(" "),stroke:e.lines[t].color,"stroke-width":2,fill:"none"});e.lines[t].element.insertBefore(r,e.lines[t].element.firstChild),e.lines[t].line=r}}},removeTooltip:{value:function(){var e=this;null!==e.tooltip&&(e.svgElement.removeChild(e.tooltip.element),e.svgElement.removeChild(e.tooltip.line),e.tooltip=null)}}});const a={name:"RC_Cookieless_Tracking_Main",props:["dbStats","dbDownloads","fetchUrl"],data:function(){return{message:"Test 2?",rawStats:this.dbStats,fileDownloads:this.dbDownloads,ui:{sessions:!0,views:!0,downloads:!0,conversions:!1,submits:!1,bounces:!1},lines:{},sums:{},date_start:null,date_end:null,fetching:!1}},computed:{downloadsPresent:function(){return this.fileDownloads.length>0}},methods:{echoData:function(){this.downloadsPresent&&console.log(this.fileDownloads)},prepareFileDownloads:function(){this.downloadsPresent&&this.fileDownloads.forEach((function(e){e.event_uri=e.event_uri.replace("/cookieLessTracking_trackFileDownload.php?download=/assets/downloads/","")}))},fetchData:function(){var e=this;if(!this.fetching){this.fetching=!0;var t=new Request("".concat(this.fetchUrl,"?start=").concat(this.date_start,"&end=").concat(this.date_end));fetch(t).then((function(e){return e.json()})).then((function(t){e.rawStats=t,e.parseStats(),e.renderChart()})).finally((function(){e.fetching=!1}))}},toggleLine:function(e){this.ui[e]=!this.ui[e],this.renderChart()},reset:function(){this.lines={sessions:{title:"User Sessions",data:[],color:"#d2007a"},views:{title:"Views",data:[],color:"#0098d4"},downloads:{title:"Downloads",data:[],color:"#fdc600"},conversions:{title:"Conversions",data:[],color:"#adcb57"},submits:{title:"Submits",data:[],color:"#f39910"},bounces:{title:"Bounces",data:[],color:"#db001b"}},this.sums={sessions:0,views:0,downloads:0,conversions:0,submits:0,bounces:0}},parseStats:function(){var e=this;this.reset(),0!==this.rawStats.length&&(this.date_start=this.rawStats[0].label,this.date_end=this.rawStats[this.rawStats.length-1].label,this.rawStats.forEach((function(t){e.lines.sessions.data.push(t.sessions),e.lines.views.data.push(t.views),e.lines.downloads.data.push(t.downloads),e.lines.conversions.data.push(t.conversions),e.lines.submits.data.push(t.submits),e.lines.bounces.data.push(t.bounces),e.sums.sessions+=parseInt(t.sessions),e.sums.views+=parseInt(t.views),e.sums.downloads+=parseInt(t.downloads),e.sums.conversions+=parseInt(t.conversions),e.sums.submits+=parseInt(t.submits),e.sums.bounces+=parseInt(t.bounces)})))},renderChart:function(){var e={labels:[],lines:[]};if(this.rawStats&&this.rawStats.length)for(var t in e={labels:this.rawStats.map((function(e){return e.label})),lines:[]},this.ui)this.ui[t]&&e.lines.push(this.lines[t]);document.getElementById("chart").innerHTML="",new i(document.getElementById("chart"),e)}},mounted:function(){this.parseStats(),this.renderChart(),this.prepareFileDownloads()}};var r=n(379),o=n.n(r),l=n(697),d={insert:"head",singleton:!1};o()(l.Z,d);l.Z.locals;var c=function(e,t,n,s,i,a,r,o){var l,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),s&&(d.functional=!0),a&&(d._scopeId="data-v-"+a),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=l):i&&(l=o?function(){i.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(e,t){return l.call(t),c(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:d}}(a,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"card p-2 content"},[t("div",{staticClass:"flex mb-2"},[t("label",{staticClass:"mr-4"},[e._v("\n                From: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.date_start,expression:"date_start"}],staticClass:"border p-1 rounded",attrs:{type:"date",disabled:e.fetching,max:e.date_end},domProps:{value:e.date_start},on:{change:e.fetchData,input:function(t){t.target.composing||(e.date_start=t.target.value)}}})]),e._v(" "),t("label",[e._v("\n                Until: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.date_end,expression:"date_end"}],staticClass:"border p-1 rounded",attrs:{type:"date",disabled:e.fetching,min:e.date_start},domProps:{value:e.date_end},on:{change:e.fetchData,input:function(t){t.target.composing||(e.date_end=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"w-full",attrs:{id:"chart"}})]),e._v(" "),t("div",{staticClass:"flex justify-between mt-2"},e._l(e.lines,(function(n,s){return t("div",{key:s,class:["cursor-pointer p-2",{"border-2":e.ui[s]}],style:"border-color: ".concat(n.color,"; width: 16%"),on:{click:function(t){return e.toggleLine(s)}}},[e._v("\n            "+e._s(n.title)),t("br"),e._v("\n            "+e._s(e.sums[s])+"\n        ")])})),0),e._v(" "),e.downloadsPresent?t("div",{staticClass:"card p-4 mt-4 content"},[t("h2",[e._v("Downloads")]),e._v(" "),t("p",[e._v("Files downloaded between "+e._s(e.date_start)+" and "+e._s(e.date_end))]),e._v(" "),t("table",{staticClass:"mt-2"},[e._m(0),e._v(" "),t("tbody",e._l(e.fileDownloads,(function(n,s){return t("tr",{key:s},[t("td",{staticClass:"p-1 text-left",staticStyle:{width:"100%"}},[e._v(e._s(n.event_uri))]),e._v(" "),t("td",{staticClass:"p-1 text-left"},[e._v(e._s(n.downloads))])])})),0)])]):e._e()])}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"p-1 text-left",staticStyle:{width:"100%"}},[e._v("Download file")]),e._v(" "),t("th",{staticClass:"p-1 text-left"},[e._v("Downloads")])])])}],!1,null,"24a9802f",null);const u=c.exports;Statamic.booting((function(){Statamic.$components.register("rc_main",u)}))},697:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(645),i=n.n(s)()((function(e){return e[1]}));i.push([e.id,"tbody tr[data-v-24a9802f]:nth-child(odd){background-color:#f3f3f3}",""]);const a=i},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,s){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(s)for(var a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);s&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},531:()=>{},379:(e,t,n)=>{var s,i=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function o(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},s=[],i=0;i<e.length;i++){var a=e[i],l=t.base?a[0]+t.base:a[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var u=o(c),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(r[u].references++,r[u].updater(h)):r.push({identifier:c,updater:v(h,t),references:1}),s.push(c)}return s}function d(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var i=n.nc;i&&(s.nonce=i)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var r=a(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,n,s){var i=n?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var a=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function f(e,t,n){var s=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var p=null,m=0;function v(e,t){var n,s,i;if(t.singleton){var a=m++;n=p||(p=d(t)),s=h.bind(null,n,a,!1),i=h.bind(null,n,a,!0)}else n=d(t),s=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<n.length;s++){var i=o(n[s]);r[i].references--}for(var a=l(e,t),d=0;d<n.length;d++){var c=o(n[d]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}n=a}}}}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={id:e,exports:{}};return t[e](a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,n,i,a)=>{if(!n){var r=1/0;for(c=0;c<e.length;c++){for(var[n,i,a]=e[c],o=!0,l=0;l<n.length;l++)(!1&a||r>=a)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(o=!1,a<r&&(r=a));if(o){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,i,a]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={641:0,30:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,a,[r,o,l]=n,d=0;if(r.some((t=>0!==e[t]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var c=l(s)}for(t&&t(n);d<r.length;d++)a=r[d],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),s.nc=void 0,s.O(void 0,[30],(()=>s(215)));var i=s.O(void 0,[30],(()=>s(531)));i=s.O(i)})();