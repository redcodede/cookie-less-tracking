(()=>{"use strict";var e,t={949:()=>{function e(){}function t(t,n){e.call(this);var s=this;s.container=t,s.labels=n.labels,s.lines=n.lines,s.tooltip=null,s.svgElement=s.createSvgElement("svg",{style:"font-family: Arial, sans-serif;"}),s.container.appendChild(s.svgElement),window.addEventListener("resize",(function(){s.render()})),s.svgElement.addEventListener("mouseleave",(function(){s.removeTooltip()})),s.svgElement.addEventListener("mousemove",(function(e){var t=s.svgElement.getBoundingClientRect(),n=t.top+document.body.scrollTop,i=t.left+document.body.scrollLeft,a=e.pageX-i,r=e.pageY-n,l=Math.max(0,Math.min(s.labels.length-1,Math.round((a-s.padding.left-20)/s.axis.x.stepSize)));if(null===s.tooltip||s.tooltip.datumIndex!==l){s.removeTooltip(),s.tooltip={datumIndex:l,element:s.createSvgElement("g",{"pointer-events":"none"}),line:s.createSvgElement("line",{x1:s.padding.left+20+l*s.axis.x.stepSize,y1:s.padding.top,x2:s.padding.left+20+l*s.axis.x.stepSize,y2:s.height-s.padding.bottom,stroke:"#c0c0c0"})},s.svgElement.insertBefore(s.tooltip.line,s.svgElement.firstChild),s.svgElement.appendChild(s.tooltip.element),(d=s.createSvgElement("text",{x:10,y:21,"font-size":12})).textContent=s.labels[l],s.tooltip.element.appendChild(d);for(var o=0;o<s.lines.length;o++){var d=s.createSvgElement("text",{x:10,y:21+16*(o+1),"font-size":12});s.tooltip.element.appendChild(d);var c=s.createSvgElement("tspan",{fill:s.colors[o%s.colors.length]});d.appendChild(c),c.textContent=s.lines[o].title+": ";var m=s.createSvgElement("tspan",{"font-weight":"bold"});d.appendChild(m),m.textContent=s.formatNumber(s.lines[o].data[l])}var h=s.tooltip.element.getBBox(),p=s.createSvgElement("rect",{x:0,y:0,width:h.width+20,height:h.height+20,rx:3,ry:3,fill:"rgba(255, 255, 255, .9)",stroke:"#c0c0c0"});s.tooltip.element.insertBefore(p,s.tooltip.element.firstChild);var u=s.padding.left+20+l*s.axis.x.stepSize-h.width-30,v=r-(h.height+20)/2;u<0&&(u+=h.width+40),v=Math.max(s.padding.top,Math.min(300-s.padding.bottom-h.height-20,v)),s.tooltip.element.setAttribute("transform","translate("+u+", "+v+")")}})),s.render()}e.prototype={colors:["#d2007a","#0098d4","#dddb2f","#1d7e07","#2c4a4a","#ff5928"],createSvgElement:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var s in t)n.setAttribute(s,t[s]);return n},formatNumber:function(e){var t="";for(e+="";e.length>3;)t="."+e.substr(e.length-3)+t,e=e.substr(0,e.length-3);return t=e+t}},t.prototype=Object.create(e.prototype,{constructor:{value:t},render:{value:function(){var e=this;for(e.width=e.container.clientWidth,e.height=300,e.svgElement.setAttribute("width",e.width),e.svgElement.setAttribute("height",e.height),e.svgElement.setAttribute("viewBox","0 0 "+e.width+" "+e.height);e.svgElement.childNodes.length;)e.svgElement.removeChild(e.svgElement.firstChild);e.renderLegend(),e.renderAxis(),e.renderLines()}},renderLegend:{value:function(){var e=this;e.legend=e.createSvgElement("g"),e.svgElement.appendChild(e.legend);for(var t=0,n=0;n<e.lines.length;n++){var s=e.createSvgElement("g",{transform:"translate("+t+", 0)"});e.legend.appendChild(s);var i=e.createSvgElement("circle",{cx:10,cy:8,r:3.5,fill:e.lines[n].color,stroke:"none"});s.appendChild(i);var a=e.createSvgElement("text",{x:20,y:13,"font-size":14});s.appendChild(a),a.textContent=e.lines[n].title,t+=s.getBBox().width+20}}},renderAxis:{value:function(){var e=this;e.axis={x:{nthLabel:1},y:{maximum:1,step:1}};for(var t=0;t<e.lines.length;t++)for(var n=0;n<e.lines[t].data.length;n++)e.axis.y.maximum=Math.max(e.axis.y.maximum,e.lines[t].data[n]);for(;7*e.axis.y.step<e.axis.y.maximum;)e.axis.y.step*=10;e.axis.y.step%2==0&&3.5*e.axis.y.step>e.axis.y.maximum&&(e.axis.y.step/=2),e.axis.y.maximum=Math.ceil(e.axis.y.maximum/e.axis.y.step)*e.axis.y.step,e.axis.x.element=e.createSvgElement("g"),e.svgElement.appendChild(e.axis.x.element),e.axis.y.element=e.createSvgElement("g"),e.svgElement.appendChild(e.axis.y.element);for(var s=0;s<e.labels.length;s++)e.axis.x.element.appendChild(e.renderXAxisLabel(e.labels[s]));for(var i=0;i<=e.axis.y.maximum;i+=e.axis.y.step)e.axis.y.element.appendChild(e.renderYAxisLabel(e.formatNumber(i)));e.padding={top:e.legend.getBBox().height+20,left:-1*Math.min(e.axis.x.element.getBBox().x+20,e.axis.y.element.getBBox().x-8),bottom:e.axis.x.element.getBBox().height},e.axis.x.element.setAttribute("transform","translate(0, "+(e.height-e.padding.bottom)+")"),e.axis.x.stepSize=e.labels.length>1?(e.width-e.padding.left-40)/(e.labels.length-1):20;for(var a=0;e.axis.x.stepSize*e.axis.x.nthLabel<20&&(e.axis.x.nthLabel++,!(a>40));)a++;if(e.axis.x.nthLabel>1)for(s=e.axis.x.element.childNodes.length-1;s>0;s--)s%e.axis.x.nthLabel&&e.axis.x.element.removeChild(e.axis.x.element.childNodes[s]);for(s=0;s<e.axis.x.element.childNodes.length;s++)e.axis.x.element.childNodes[s].setAttribute("transform","translate("+(e.padding.left+20+e.axis.x.nthLabel*s*e.axis.x.stepSize)+", 0)");e.axis.y.element.setAttribute("transform","translate("+e.padding.left+", 0)"),e.axis.y.stepSize=(300-e.padding.bottom-e.padding.top)/(e.axis.y.maximum/e.axis.y.step);for(s=0;s<e.axis.y.element.childNodes.length;s++)e.axis.y.element.childNodes[s].setAttribute("transform","translate(0, "+(300-e.padding.bottom-s*e.axis.y.stepSize)+")")}},renderXAxisLabel:{value:function(e){var t=this,n=t.createSvgElement("g"),s=t.createSvgElement("line",{x1:0,y1:0,x2:0,y2:5,stroke:"#c0c0c0"});n.appendChild(s);var i=t.createSvgElement("text",{x:-15,y:7,"font-size":11,"text-anchor":"end",transform:"rotate(-45 0 0)"});return i.textContent=e,n.appendChild(i),n}},renderYAxisLabel:{value:function(e){var t=this,n=t.createSvgElement("g"),s=t.createSvgElement("line",{x1:0,y1:0,x2:t.width,y2:0,stroke:"#c0c0c0"});n.appendChild(s);var i=t.createSvgElement("text",{x:-8,y:4,"font-size":11,"text-anchor":"end"});return i.textContent=e,n.appendChild(i),n}},renderLines:{value:function(){for(var e=this,t=0;t<e.lines.length;t++){e.lines[t].element=e.createSvgElement("g",{transform:"translate("+(e.padding.left+20)+", "+(300-e.padding.bottom)+")"}),e.svgElement.appendChild(e.lines[t].element);var n=[];e.lines[t].circles=[];for(var s=0;s<e.lines[t].data.length;s++){var i={x:s*e.axis.x.stepSize,y:-1*e.lines[t].data[s]*(e.axis.y.stepSize/e.axis.y.step)};if(n.push(i.x+","+i.y),e.axis.x.stepSize>=10){var a=e.createSvgElement("circle",{cx:i.x,cy:i.y,r:3.5,fill:e.lines[t].color,stroke:"none",cursor:"pointer"});e.lines[t].element.appendChild(a),e.lines[t].circles.push(a),a.addEventListener("mouseenter",(function(e){e.target.setAttribute("r",4.5)})),a.addEventListener("mouseleave",(function(e){e.target.setAttribute("r",3.5)}))}}var r=e.createSvgElement("polyline",{points:n.join(" "),stroke:e.lines[t].color,"stroke-width":2,fill:"none"});e.lines[t].element.insertBefore(r,e.lines[t].element.firstChild),e.lines[t].line=r}}},removeTooltip:{value:function(){var e=this;null!==e.tooltip&&(e.svgElement.removeChild(e.tooltip.element),e.svgElement.removeChild(e.tooltip.line),e.tooltip=null)}}});var n=function(e,t,n,s,i,a,r,l){var o,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),s&&(d.functional=!0),a&&(d._scopeId="data-v-"+a),r?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=o):i&&(o=l?function(){i.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:i),o)if(d.functional){d._injectStyles=o;var c=d.render;d.render=function(e,t){return o.call(t),c(e,t)}}else{var m=d.beforeCreate;d.beforeCreate=m?[].concat(m,o):[o]}return{exports:e,options:d}}({name:"RC_Cookieless_Tracking_Main",props:["dbStats","fetchUrl"],data:function(){return{message:"Test 2?",rawStats:this.dbStats,ui:{sessions:!0,views:!0,downloads:!1,conversions:!1,submits:!1,bounces:!1},lines:{},sums:{},date_start:null,date_end:null,fetching:!1}},computed:{},methods:{fetchData:function(){var e=this;if(!this.fetching){this.fetching=!0;var t=new Request("".concat(this.fetchUrl,"?start=").concat(this.date_start,"&end=").concat(this.date_end));fetch(t).then((function(e){return e.json()})).then((function(t){e.rawStats=t,e.parseStats(),e.renderChart()})).finally((function(){e.fetching=!1}))}},toggleLine:function(e){this.ui[e]=!this.ui[e],this.renderChart()},reset:function(){this.lines={sessions:{title:"User Sessions",data:[],color:"#d2007a"},views:{title:"Views",data:[],color:"#0098d4"},downloads:{title:"Downloads",data:[],color:"#fdc600"},conversions:{title:"Conversions",data:[],color:"#adcb57"},submits:{title:"Submits",data:[],color:"#f39910"},bounces:{title:"Bounces",data:[],color:"#db001b"}},this.sums={sessions:0,views:0,downloads:0,conversions:0,submits:0,bounces:0}},parseStats:function(){var e=this;this.reset(),this.date_start=this.rawStats[0].label,this.date_end=this.rawStats[this.rawStats.length-1].label,this.rawStats.forEach((function(t){e.lines.sessions.data.push(t.sessions),e.lines.views.data.push(t.views),e.lines.downloads.data.push(t.downloads),e.lines.conversions.data.push(t.conversions),e.lines.submits.data.push(t.submits),e.lines.bounces.data.push(t.bounces),e.sums.sessions+=parseInt(t.sessions),e.sums.views+=parseInt(t.views),e.sums.downloads+=parseInt(t.downloads),e.sums.conversions+=parseInt(t.conversions),e.sums.submits+=parseInt(t.submits),e.sums.bounces+=parseInt(t.bounces)}))},renderChart:function(){var e={labels:[],lines:[]};if(this.rawStats&&this.rawStats.length)for(var n in e={labels:this.rawStats.map((function(e){return e.label})),lines:[]},this.ui)this.ui[n]&&e.lines.push(this.lines[n]);document.getElementById("chart").innerHTML="",new t(document.getElementById("chart"),e)}},mounted:function(){this.parseStats(),this.renderChart()}},(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"card p-2 content"},[t("div",{staticClass:"flex mb-2"},[t("label",{staticClass:"mr-4"},[e._v("\n                From: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.date_start,expression:"date_start"}],staticClass:"border p-1 rounded",attrs:{type:"date",disabled:e.fetching,max:e.date_end},domProps:{value:e.date_start},on:{change:e.fetchData,input:function(t){t.target.composing||(e.date_start=t.target.value)}}})]),e._v(" "),t("label",[e._v("\n                Until: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.date_end,expression:"date_end"}],staticClass:"border p-1 rounded",attrs:{type:"date",disabled:e.fetching,min:e.date_start},domProps:{value:e.date_end},on:{change:e.fetchData,input:function(t){t.target.composing||(e.date_end=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"w-full",attrs:{id:"chart"}})]),e._v(" "),t("div",{staticClass:"flex justify-between mt-2"},e._l(e.lines,(function(n,s){return t("div",{key:s,class:["cursor-pointer p-2",{"border-2":e.ui[s]}],style:"border-color: ".concat(n.color,"; width: 16%"),on:{click:function(t){return e.toggleLine(s)}}},[e._v("\n            "+e._s(n.title)),t("br"),e._v("\n            "+e._s(e.sums[s])+"\n        ")])})),0)])}),[],!1,null,"028b4aac",null);const s=n.exports;Statamic.booting((function(){Statamic.$components.register("rc_main",s)}))},531:()=>{}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,n,i,a)=>{if(!n){var r=1/0;for(c=0;c<e.length;c++){for(var[n,i,a]=e[c],l=!0,o=0;o<n.length;o++)(!1&a||r>=a)&&Object.keys(s.O).every((e=>s.O[e](n[o])))?n.splice(o--,1):(l=!1,a<r&&(r=a));if(l){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,i,a]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={641:0,30:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,a,[r,l,o]=n,d=0;if(r.some((t=>0!==e[t]))){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);if(o)var c=o(s)}for(t&&t(n);d<r.length;d++)a=r[d],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),s.O(void 0,[30],(()=>s(949)));var i=s.O(void 0,[30],(()=>s(531)));i=s.O(i)})();